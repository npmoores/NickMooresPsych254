<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="x-ua-compatible" content="IE=9" >

<title>The data set</title>

<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 12px;
   margin: 8px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 { 
   font-size:2.2em; 
}

h2 { 
   font-size:1.8em; 
}

h3 { 
   font-size:1.4em; 
}

h4 { 
   font-size:1.0em; 
}

h5 { 
   font-size:0.9em; 
}

h6 { 
   font-size:0.8em; 
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre {	
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
   white-space: pre-wrap;
}

pre code {
   display: block; padding: 0.5em;
}

code.r, code.cpp {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * { 
      background: transparent !important; 
      color: black !important; 
      filter:none !important; 
      -ms-filter: none !important; 
   }

   body { 
      font-size:12pt; 
      max-width:100%; 
   }
       
   a, a:visited { 
      text-decoration: underline; 
   }

   hr { 
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote { 
      padding-right: 1em; 
      page-break-inside: avoid; 
   }

   tr, img { 
      page-break-inside: avoid; 
   }

   img { 
      max-width: 100% !important; 
   }

   @page :left { 
      margin: 15mm 20mm 15mm 10mm; 
   }
     
   @page :right { 
      margin: 15mm 10mm 15mm 20mm; 
   }

   p, h2, h3 { 
      orphans: 3; widows: 3; 
   }

   h2, h3 { 
      page-break-after: avoid; 
   }
}

</style>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: rgb(88, 72, 246)
   }

   pre .number {
     color: rgb(0, 0, 205);
   }

   pre .comment {
     color: rgb(76, 136, 107);
   }

   pre .keyword {
     color: rgb(0, 0, 255);
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: rgb(3, 106, 7);
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>




</head>

<body>
<h2>The data set</h2>

<p>This data set comes from a replication of <a href="http://dx.doi.org/10.1111/j.1467-9280.2008.02057.x">Janiszewski and Uy (2008)</a>, who investigated whether the precision of the anchor for a price influences the amount of adjustment.</p>

<p>In the data frame, the <code>Input.condition</code> variable represents the experimental condition (under the rounded anchor, the rounded anchor, over the rounded anchor). <code>Input.price1</code>, <code>Input.price2</code>, and <code>Input.price3</code> are the anchors for the <code>Answer.dog_cost</code>, <code>Answer.plasma_cost</code>, and <code>Answer.sushi_cost</code> items.</p>

<h2>Preliminaries</h2>

<p>I pretty much always clear the workspace and load the same basic helper functions before starting an analysis.</p>

<pre><code class="r">rm(list=ls())
#load libraries for data manipulation and graphing
library(ggplot2)
library(plyr)
library(lme4)
</code></pre>

<pre><code>## Loading required package: Matrix
## Loading required package: Rcpp
</code></pre>

<pre><code class="r">library(lmerTest)
</code></pre>

<pre><code>## 
## Attaching package: &#39;lmerTest&#39;
## 
## The following object is masked from &#39;package:lme4&#39;:
## 
##     lmer
## 
## The following object is masked from &#39;package:stats&#39;:
## 
##     step
</code></pre>

<pre><code class="r">library(tidyr)
</code></pre>

<pre><code>## 
## Attaching package: &#39;tidyr&#39;
## 
## The following object is masked from &#39;package:Matrix&#39;:
## 
##     expand
</code></pre>

<pre><code class="r">library(dplyr)
</code></pre>

<pre><code>## 
## Attaching package: &#39;dplyr&#39;
## 
## The following objects are masked from &#39;package:plyr&#39;:
## 
##     arrange, count, desc, failwith, id, mutate, rename, summarise,
##     summarize
## 
## The following object is masked from &#39;package:stats&#39;:
## 
##     filter
## 
## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union
</code></pre>

<pre><code class="r">#some useful functions for computing measurement error
sem &lt;- function(x) {sd(x)/sqrt(length(x))}
ci95 &lt;- function(x) {3.96*sem(x)}
</code></pre>

<p>Note that I&#39;m using a &ldquo;relative&rdquo; path (the &ldquo;../helper&rdquo;) rather than an absolute path (e.g. &ldquo;/Users/mcfrank/code/projects/etc&hellip;&rdquo;). The relative path means that someone else can run your code by changing to the right directory, while the absolute path will force someone else to make trivial changes every time they want to run it.</p>

<h2>Part 1: Data cleaning</h2>

<p>The first part of this exercise actually just consists of getting the data in a format usable for analysis. This is not trivial. Let&#39;s try it:</p>

<h3>Get the data in a format usable for analysis</h3>

<pre><code class="r">d &lt;- read.csv(&quot;../data/janiszewski_rep_exercise.csv&quot;)
d &lt;- tbl_df(d)
glimpse(d)
</code></pre>

<pre><code>## Variables:
## $ HITId                       (fctr) 261WKUDD8XMBJ8COBQ261TO6T1XNCJ, 2...
## $ HITTypeId                   (fctr) 2DVGTP9RA7S5C4ALLOJOM70JMHCRW9, 2...
## $ Title                       (fctr) How much is it worth? Quick 2 min...
## $ Description                 (fctr) A quick two minute survey asking ...
## $ Keywords                    (fctr) survey, quick, prices, survey, qu...
## $ Reward                      (dbl) 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1,...
## $ CreationTime                (fctr) Wed Jan 25 18:13:24 GMT 2012, Wed...
## $ MaxAssignments              (int) 30, 30, 30, 30, 30, 30, 30, 30, 30...
## $ RequesterAnnotation         (fctr) Department:Other, Department:Othe...
## $ AssignmentDurationInSeconds (int) 600, 600, 600, 600, 600, 600, 600,...
## $ AutoApprovalDelayInSeconds  (int) 604800, 604800, 604800, 604800, 60...
## $ Expiration                  (fctr) Wed Feb 01 18:13:24 GMT 2012, Wed...
## $ NumberOfSimilarHITs         (int) 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2...
## $ LifetimeInSeconds           (lgl) NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ AssignmentId                (fctr) 23NOK5UFJ51YN8N3B5PQZ1CSVW67AD, 2...
## $ WorkerId                    (fctr) A18L9BY7DNA8D3, A1YGOYNWW3Q9SQ, A...
## $ AssignmentStatus            (fctr) Submitted, Submitted, Submitted, ...
## $ AcceptTime                  (fctr) Wed Jan 25 18:31:40 GMT 2012, Thu...
## $ SubmitTime                  (fctr) Wed Jan 25 18:32:03 GMT 2012, Thu...
## $ AutoApprovalTime            (fctr) Wed Feb 01 10:32:03 PST 2012, Thu...
## $ ApprovalTime                (lgl) NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ RejectionTime               (lgl) NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ RequesterFeedback           (lgl) NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ WorkTimeInSeconds           (int) 23, 228, 89, 145, 232, 86, 93, 54,...
## $ LifetimeApprovalRate        (fctr) 0% (0/0), 0% (0/0), 0% (0/0), 0% ...
## $ Last30DaysApprovalRate      (fctr) 0% (0/0), 0% (0/0), 0% (0/0), 0% ...
## $ Last7DaysApprovalRate       (fctr) 0% (0/0), 0% (0/0), 0% (0/0), 0% ...
## $ Input.condition             (fctr) over, over, over, over, over, ove...
## $ Input.price1                (fctr) 5,012, 5,012, 5,012, 5,012, 5,012...
## $ Input.price2                (fctr) 2,508, 2,508, 2,508, 2,508, 2,508...
## $ Input.price3                (dbl) 9.36, 9.36, 9.36, 9.36, 9.36, 9.36...
## $ Answer.dog_cost             (fctr) 2300, 2450, 800, 2000, 2,000, 160...
## $ Answer.plasma_cost          (fctr) 4800, 4850, 1200, 4200, 4500, 460...
## $ Answer.sushi_cost           (fctr) 8.7, 9, 8, 9, 8.5, 8, 6.95, 8, 8....
</code></pre>

<pre><code class="r">mean(d$Answer.sushi_cost) #will give an error! need to convert to a different data type
</code></pre>

<pre><code>## Warning in mean.default(d$Answer.sushi_cost): argument is not numeric or
## logical: returning NA
</code></pre>

<pre><code>## [1] NA
</code></pre>

<pre><code class="r">mean(d$Input.price2) #will give an error! need to convert to a different data type
</code></pre>

<pre><code>## Warning in mean.default(d$Input.price2): argument is not numeric or
## logical: returning NA
</code></pre>

<pre><code>## [1] NA
</code></pre>

<p>In looking at the data, we see that we can&#39;t go forward with the analysis because some participants are duplicates (some participants did the task more than once). In addition, many of the columns which we&#39;d like to perform summary statistics over, including the various <code>answer</code> columns and the <code>input price</code> columns, are stored as factors, not as integers or numerics.</p>

<h3>Fix the data file so that it looks reasonable.</h3>

<p>In order to do this, I remove any commas from the columns with integer or double values, and cast them as integers or doubles where appropriate.</p>

<pre><code class="r">#clean the numeric columns
d$Input.price1 &lt;- sub(&quot;,&quot;,&quot;&quot;,d$Input.price1)
d$Input.price1 &lt;- as.integer(d$Input.price1)
d$Input.price2 &lt;- sub(&quot;,&quot;,&quot;&quot;,d$Input.price2)
d$Input.price2 &lt;- as.integer(d$Input.price2)
d$Input.price3 &lt;- sub(&quot;,&quot;,&quot;&quot;,d$Input.price3)
d$Input.price3 &lt;- as.double(d$Input.price3)
d$Answer.dog_cost &lt;- sub(&quot;,&quot;,&quot;&quot;,d$Answer.dog_cost)
d$Answer.dog_cost &lt;- as.double(d$Answer.dog_cost)
</code></pre>

<pre><code>## Warning: NAs introduced by coercion
</code></pre>

<pre><code class="r">d$Answer.plasma_cost &lt;- sub(&quot;,&quot;,&quot;&quot;,d$Answer.plasma_cost)
d$Answer.plasma_cost &lt;- as.double(d$Answer.plasma_cost)
d$Answer.sushi_cost &lt;- sub(&quot;,&quot;,&quot;&quot;,d$Answer.sushi_cost)
d$Answer.sushi_cost &lt;- as.double(d$Answer.sushi_cost)
</code></pre>

<pre><code>## Warning: NAs introduced by coercion
</code></pre>

<pre><code class="r">#examine the data again
glimpse(d)
</code></pre>

<pre><code>## Variables:
## $ HITId                       (fctr) 261WKUDD8XMBJ8COBQ261TO6T1XNCJ, 2...
## $ HITTypeId                   (fctr) 2DVGTP9RA7S5C4ALLOJOM70JMHCRW9, 2...
## $ Title                       (fctr) How much is it worth? Quick 2 min...
## $ Description                 (fctr) A quick two minute survey asking ...
## $ Keywords                    (fctr) survey, quick, prices, survey, qu...
## $ Reward                      (dbl) 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1,...
## $ CreationTime                (fctr) Wed Jan 25 18:13:24 GMT 2012, Wed...
## $ MaxAssignments              (int) 30, 30, 30, 30, 30, 30, 30, 30, 30...
## $ RequesterAnnotation         (fctr) Department:Other, Department:Othe...
## $ AssignmentDurationInSeconds (int) 600, 600, 600, 600, 600, 600, 600,...
## $ AutoApprovalDelayInSeconds  (int) 604800, 604800, 604800, 604800, 60...
## $ Expiration                  (fctr) Wed Feb 01 18:13:24 GMT 2012, Wed...
## $ NumberOfSimilarHITs         (int) 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2...
## $ LifetimeInSeconds           (lgl) NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ AssignmentId                (fctr) 23NOK5UFJ51YN8N3B5PQZ1CSVW67AD, 2...
## $ WorkerId                    (fctr) A18L9BY7DNA8D3, A1YGOYNWW3Q9SQ, A...
## $ AssignmentStatus            (fctr) Submitted, Submitted, Submitted, ...
## $ AcceptTime                  (fctr) Wed Jan 25 18:31:40 GMT 2012, Thu...
## $ SubmitTime                  (fctr) Wed Jan 25 18:32:03 GMT 2012, Thu...
## $ AutoApprovalTime            (fctr) Wed Feb 01 10:32:03 PST 2012, Thu...
## $ ApprovalTime                (lgl) NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ RejectionTime               (lgl) NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ RequesterFeedback           (lgl) NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ WorkTimeInSeconds           (int) 23, 228, 89, 145, 232, 86, 93, 54,...
## $ LifetimeApprovalRate        (fctr) 0% (0/0), 0% (0/0), 0% (0/0), 0% ...
## $ Last30DaysApprovalRate      (fctr) 0% (0/0), 0% (0/0), 0% (0/0), 0% ...
## $ Last7DaysApprovalRate       (fctr) 0% (0/0), 0% (0/0), 0% (0/0), 0% ...
## $ Input.condition             (fctr) over, over, over, over, over, ove...
## $ Input.price1                (int) 5012, 5012, 5012, 5012, 5012, 5012...
## $ Input.price2                (int) 2508, 2508, 2508, 2508, 2508, 2508...
## $ Input.price3                (dbl) 9.36, 9.36, 9.36, 9.36, 9.36, 9.36...
## $ Answer.dog_cost             (dbl) 2300, 2450, 800, 2000, 2000, 1600,...
## $ Answer.plasma_cost          (dbl) 4800.00, 4850.00, 1200.00, 4200.00...
## $ Answer.sushi_cost           (dbl) 8.70, 9.00, 8.00, 9.00, 8.50, 8.00...
</code></pre>

<pre><code class="r">#calculate example summary statistics
mean_stats &lt;- aggregate(Answer.dog_cost ~ Input.price1 + Input.price2 + Input.price3, d, mean)
sd_stats &lt;- aggregate(Answer.dog_cost ~ Input.price1 + Input.price2 + Input.price3, d, sd)
sem_stats &lt;- aggregate(Answer.dog_cost ~ Input.price1 + Input.price2 + Input.price3, d, sem)
mean_stats
</code></pre>

<pre><code>##   Input.price1 Input.price2 Input.price3 Answer.dog_cost
## 1         4988         2492         8.64        1950.103
## 2         5000         2500         9.00        1877.900
## 3         5012         2508         9.36        1898.300
</code></pre>

<pre><code class="r">sd_stats
</code></pre>

<pre><code>##   Input.price1 Input.price2 Input.price3 Answer.dog_cost
## 1         4988         2492         8.64        299.1247
## 2         5000         2500         9.00        469.3431
## 3         5012         2508         9.36        419.7275
</code></pre>

<pre><code class="r">sem_stats
</code></pre>

<pre><code>##   Input.price1 Input.price2 Input.price3 Answer.dog_cost
## 1         4988         2492         8.64        55.54607
## 2         5000         2500         9.00        85.68993
## 3         5012         2508         9.36        76.63141
</code></pre>

<pre><code class="r">#remove the duplicate turkers
d &lt;- subset(d,!duplicated(d$WorkerId))
</code></pre>

<h2>Part 2: Making these data tidy</h2>

<p>Now let&#39;s start with the cleaned data, so that we are all beginning from the same place.</p>

<pre><code class="r">d &lt;- read.csv(&quot;../data/janiszewski_rep_cleaned.csv&quot;)
glimpse(d)
</code></pre>

<pre><code>## Variables:
## $ HITId                       (fctr) 261WKUDD8XMBJ8COBQ261TO6T1XNCJ, 2...
## $ HITTypeId                   (fctr) 2DVGTP9RA7S5C4ALLOJOM70JMHCRW9, 2...
## $ Title                       (fctr) How much is it worth? Quick 2 min...
## $ Description                 (fctr) A quick two minute survey asking ...
## $ Keywords                    (fctr) survey, quick, prices, survey, qu...
## $ Reward                      (dbl) 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1,...
## $ CreationTime                (fctr) Wed Jan 25 18:13:24 GMT 2012, Wed...
## $ MaxAssignments              (int) 30, 30, 30, 30, 30, 30, 30, 30, 30...
## $ RequesterAnnotation         (fctr) Department:Other, Department:Othe...
## $ AssignmentDurationInSeconds (int) 600, 600, 600, 600, 600, 600, 600,...
## $ AutoApprovalDelayInSeconds  (int) 604800, 604800, 604800, 604800, 60...
## $ Expiration                  (fctr) Wed Feb 01 18:13:24 GMT 2012, Wed...
## $ NumberOfSimilarHITs         (int) 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2...
## $ LifetimeInSeconds           (lgl) NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ AssignmentId                (fctr) 23NOK5UFJ51YN8N3B5PQZ1CSVW67AD, 2...
## $ WorkerId                    (fctr) A18L9BY7DNA8D3, A1YGOYNWW3Q9SQ, A...
## $ AssignmentStatus            (fctr) Submitted, Submitted, Submitted, ...
## $ AcceptTime                  (fctr) Wed Jan 25 18:31:40 GMT 2012, Thu...
## $ SubmitTime                  (fctr) Wed Jan 25 18:32:03 GMT 2012, Thu...
## $ AutoApprovalTime            (fctr) Wed Feb 01 10:32:03 PST 2012, Thu...
## $ ApprovalTime                (lgl) NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ RejectionTime               (lgl) NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ RequesterFeedback           (lgl) NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ WorkTimeInSeconds           (int) 23, 228, 89, 145, 232, 86, 93, 54,...
## $ LifetimeApprovalRate        (fctr) 0% (0/0), 0% (0/0), 0% (0/0), 0% ...
## $ Last30DaysApprovalRate      (fctr) 0% (0/0), 0% (0/0), 0% (0/0), 0% ...
## $ Last7DaysApprovalRate       (fctr) 0% (0/0), 0% (0/0), 0% (0/0), 0% ...
## $ Input.condition             (fctr) over, over, over, over, over, ove...
## $ Input.price1                (int) 5012, 5012, 5012, 5012, 5012, 5012...
## $ Input.price2                (int) 2508, 2508, 2508, 2508, 2508, 2508...
## $ Input.price3                (dbl) 9.36, 9.36, 9.36, 9.36, 9.36, 9.36...
## $ Answer.dog_cost             (dbl) 2300, 2450, 800, 2000, 2000, 1600,...
## $ Answer.plasma_cost          (dbl) 4800.00, 4850.00, 1200.00, 4200.00...
## $ Answer.sushi_cost           (dbl) 8.70, 9.00, 8.00, 9.00, 8.50, 8.00...
</code></pre>

<p>This data frame is in <em>wide</em> format - that means that each row is a participant and there are multiple observations per participant. This data is not <em>tidy</em>.</p>

<p>To make this data tidy, we&#39;ll do some cleanup. First, remove the columns you don&#39;t need, using the verb <code>select</code>.</p>

<h3>Remove the columns you don&#39;t need</h3>

<pre><code class="r">d.tidy &lt;- d
d.tidy &lt;- select(d, one_of(c(&quot;HITId&quot;,&quot;HITTypeId&quot;,&quot;Reward&quot;,&quot;AssignmentId&quot;,&quot;WorkerId&quot;,&quot;WorkTimeInSeconds&quot;,&quot;Input.condition&quot;,&quot;Input.price1&quot;,&quot;Input.price2&quot;,&quot;Input.price3&quot;,&quot;Answer.dog_cost&quot;,&quot;Answer.plasma_cost&quot;,&quot;Answer.sushi_cost&quot;)))
glimpse(d.tidy)
</code></pre>

<pre><code>## Variables:
## $ HITId              (fctr) 261WKUDD8XMBJ8COBQ261TO6T1XNCJ, 261WKUDD8X...
## $ HITTypeId          (fctr) 2DVGTP9RA7S5C4ALLOJOM70JMHCRW9, 2DVGTP9RA7...
## $ Reward             (dbl) 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1...
## $ AssignmentId       (fctr) 23NOK5UFJ51YN8N3B5PQZ1CSVW67AD, 23Q24E6AUB...
## $ WorkerId           (fctr) A18L9BY7DNA8D3, A1YGOYNWW3Q9SQ, A2JKCS6UCA...
## $ WorkTimeInSeconds  (int) 23, 228, 89, 145, 232, 86, 93, 54, 106, 110...
## $ Input.condition    (fctr) over, over, over, over, over, over, over, ...
## $ Input.price1       (int) 5012, 5012, 5012, 5012, 5012, 5012, 5012, 5...
## $ Input.price2       (int) 2508, 2508, 2508, 2508, 2508, 2508, 2508, 2...
## $ Input.price3       (dbl) 9.36, 9.36, 9.36, 9.36, 9.36, 9.36, 9.36, 9...
## $ Answer.dog_cost    (dbl) 2300, 2450, 800, 2000, 2000, 1600, 1750, 22...
## $ Answer.plasma_cost (dbl) 4800.00, 4850.00, 1200.00, 4200.00, 4500.00...
## $ Answer.sushi_cost  (dbl) 8.70, 9.00, 8.00, 9.00, 8.50, 8.00, 6.95, 8...
</code></pre>

<p>I now rename some of the column variables using <code>rename</code>, attempting to utilize a naming scheme that is consistent with case, consistent with &ldquo;.&rdquo; or &ldquo;<em>&rdquo; ( &ldquo;</em>&rdquo; is usually preferred), and concise as will be comprehensible to others.</p>

<p>Where possible, I use the <code>%&gt;%</code> operator to pipe the <code>d.tidy</code> as an argument to subsequent <code>tidyr</code> function calls.</p>

<pre><code class="r">d.tidy &lt;- d.tidy %&gt;% rename(hit_ID = HITId, hit_type_ID = HITTypeId, assignment_ID = AssignmentId, worker_ID = WorkerId) %&gt;% rename(worker_time = WorkTimeInSeconds, reward = Reward, input_condition = Input.condition, input_price1 = Input.price1, input_price2 = Input.price2, input_price3 = Input.price3, answer_dog = Answer.dog_cost, answer_plasma = Answer.plasma_cost, answer_sushi = Answer.sushi_cost)
glimpse(d.tidy)
</code></pre>

<pre><code>## Variables:
## $ hit_ID          (fctr) 261WKUDD8XMBJ8COBQ261TO6T1XNCJ, 261WKUDD8XMBJ...
## $ hit_type_ID     (fctr) 2DVGTP9RA7S5C4ALLOJOM70JMHCRW9, 2DVGTP9RA7S5C...
## $ reward          (dbl) 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0...
## $ assignment_ID   (fctr) 23NOK5UFJ51YN8N3B5PQZ1CSVW67AD, 23Q24E6AUBXHC...
## $ worker_ID       (fctr) A18L9BY7DNA8D3, A1YGOYNWW3Q9SQ, A2JKCS6UCAUAR...
## $ worker_time     (int) 23, 228, 89, 145, 232, 86, 93, 54, 106, 110, 1...
## $ input_condition (fctr) over, over, over, over, over, over, over, ove...
## $ input_price1    (int) 5012, 5012, 5012, 5012, 5012, 5012, 5012, 5012...
## $ input_price2    (int) 2508, 2508, 2508, 2508, 2508, 2508, 2508, 2508...
## $ input_price3    (dbl) 9.36, 9.36, 9.36, 9.36, 9.36, 9.36, 9.36, 9.36...
## $ answer_dog      (dbl) 2300, 2450, 800, 2000, 2000, 1600, 1750, 2200,...
## $ answer_plasma   (dbl) 4800.00, 4850.00, 1200.00, 4200.00, 4500.00, 4...
## $ answer_sushi    (dbl) 8.70, 9.00, 8.00, 9.00, 8.50, 8.00, 6.95, 8.00...
</code></pre>

<p>I now use the <code>tidyr</code> <em>gather</em> function to turn the dataframe into a <em>tidy</em> data frame in long form, collapsing the <code>input price</code> and <code>answer</code> columns so that each answer gets its own row, instead of each subject in the MTurk study getting their own row.</p>

<h3>Convert the data to long format</h3>

<pre><code class="r">d.tidy &lt;- d.tidy %&gt;% gather(&quot;input_price_type&quot;, &quot;input_price_amount&quot;, input_price1:input_price3, na.rm=TRUE) %&gt;% gather(&quot;answer_type&quot;, &quot;answer_amount&quot;, answer_dog:answer_plasma, na.rm=TRUE)
glimpse(d.tidy)
</code></pre>

<pre><code>## Variables:
## $ hit_ID             (fctr) 261WKUDD8XMBJ8COBQ261TO6T1XNCJ, 261WKUDD8X...
## $ hit_type_ID        (fctr) 2DVGTP9RA7S5C4ALLOJOM70JMHCRW9, 2DVGTP9RA7...
## $ reward             (dbl) 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1...
## $ assignment_ID      (fctr) 23NOK5UFJ51YN8N3B5PQZ1CSVW67AD, 23Q24E6AUB...
## $ worker_ID          (fctr) A18L9BY7DNA8D3, A1YGOYNWW3Q9SQ, A2JKCS6UCA...
## $ worker_time        (int) 23, 228, 89, 145, 232, 86, 93, 54, 106, 110...
## $ input_condition    (fctr) over, over, over, over, over, over, over, ...
## $ answer_sushi       (dbl) 8.70, 9.00, 8.00, 9.00, 8.50, 8.00, 6.95, 8...
## $ input_price_type   (fctr) input_price1, input_price1, input_price1, ...
## $ input_price_amount (dbl) 5012, 5012, 5012, 5012, 5012, 5012, 5012, 5...
## $ answer_type        (fctr) answer_dog, answer_dog, answer_dog, answer...
## $ answer_amount      (dbl) 2300, 2450, 800, 2000, 2000, 1600, 1750, 22...
</code></pre>

<p>I now use the <code>tidyr</code> <em>spread</em> function to demonstrate how one can convert a dataframe in long format to one in wide format again.</p>

<h3>Convert the data back to wide format</h3>

<pre><code class="r">d.wide &lt;- d.tidy %&gt;% spread(&quot;input_price_type&quot;,&quot;input_price_amount&quot;) %&gt;% spread(&quot;answer_type&quot;,&quot;answer_amount&quot;)
glimpse(d.wide)
</code></pre>

<pre><code>## Variables:
## $ hit_ID          (fctr) 261WKUDD8XMBJ8COBQ261TO6T1XNCJ, 261WKUDD8XMBJ...
## $ hit_type_ID     (fctr) 2DVGTP9RA7S5C4ALLOJOM70JMHCRW9, 2DVGTP9RA7S5C...
## $ reward          (dbl) 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0...
## $ assignment_ID   (fctr) 23NOK5UFJ51YN8N3B5PQZ1CSVW67AD, 23Q24E6AUBXHC...
## $ worker_ID       (fctr) A18L9BY7DNA8D3, A1YGOYNWW3Q9SQ, A2JKCS6UCAUAR...
## $ worker_time     (int) 23, 228, 89, 145, 232, 86, 93, 54, 106, 110, 1...
## $ input_condition (fctr) over, over, over, over, over, over, over, ove...
## $ answer_sushi    (dbl) 8.70, 9.00, 8.00, 9.00, 8.50, 8.00, 6.95, 8.00...
## $ input_price1    (dbl) 5012, 5012, 5012, 5012, 5012, 5012, 5012, 5012...
## $ input_price2    (dbl) 2508, 2508, 2508, 2508, 2508, 2508, 2508, 2508...
## $ input_price3    (dbl) 9.36, 9.36, 9.36, 9.36, 9.36, 9.36, 9.36, 9.36...
## $ answer_dog      (dbl) 2300, 2450, 800, 2000, 2000, 1600, 1750, 2200,...
## $ answer_plasma   (dbl) 4800.00, 4850.00, 1200.00, 4200.00, 4500.00, 4...
</code></pre>

<h2>Part 3: Manipulating the data using dplyr</h2>

<p>Try also using the dplyr <code>distinct</code> function to remove the duplicate participants from the raw csv file that you discovered in part 1.</p>

<pre><code class="r">d.raw &lt;- read.csv(&quot;../data/janiszewski_rep_exercise.csv&quot;)
d.raw &lt;- tbl_df(d.raw)
d.raw &lt;- d.raw %&gt;% rename(worker_ID = WorkerId)
d.unique.subs &lt;- distinct(d.raw, worker_ID)
nrow(d.raw)
</code></pre>

<pre><code>## [1] 90
</code></pre>

<pre><code class="r">nrow(d.unique.subs)
</code></pre>

<pre><code>## [1] 87
</code></pre>

</body>

</html>

